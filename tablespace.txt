alter database db1 rename to db2;



SELECT datname, spcname AS tablespace
FROM pg_database d
JOIN pg_tablespace t ON d.dattablespace = t.oid
WHERE datname = 'your_database_name';





SELECT datname, spcname AS tablespace
FROM pg_database d
JOIN pg_tablespace t ON d.dattablespace = t.oid
ORDER BY datname;


SELECT spcname, pg_tablespace_location(oid) AS location
FROM pg_tablespace;







\db






su - postgres

mkdir xxx


CREATE TABLESPACE myts LOCATION '/var/lib/postgresql/xxx';

alter database db1 rename to db2;

ALTER DATABASE db2 SET TABLESPACE myts;

SELECT datname, spcname
FROM pg_database d
JOIN pg_tablespace t ON d.dattablespace = t.oid
WHERE datname = 'test2';
